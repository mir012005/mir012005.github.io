<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Simulation Ligue des Champions</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>‚öΩ Simulation LDC</h1>
        <nav>
            <button onclick="showPage('home')">Accueil</button>
            <button onclick="showPage('simulate')">Simulateur Club</button>
            <button onclick="showPage('analyses'); chargerAnalysesGlobales()">Analyses Globales</button>
            <button onclick="showPage('duel')">‚öîÔ∏è Duel</button>
            <button onclick="showPage('ranking'); chargerClassement()">üèÜ Classement</button>
            <button onclick="showPage('match-impact')">‚ö° Impact Matchs</button>
            <button onclick="showPage('probas-zone')">üìä Probabilit√©s</button>
        </nav>
    </header>

    <main>
        <section id="home" class="page">
            <div class="hero">
                <h2>Bienvenue sur le Simulateur LDC</h2>
                <p>Ce projet utilise la m√©thode de Monte Carlo et les lois de Poisson pour pr√©dire la fin de la saison.</p>
                <div class="actions">
                    <button class="big-btn" onclick="showPage('simulate')">Simuler mon club</button>
                    <button class="big-btn secondary" onclick="showPage('analyses'); chargerAnalysesGlobales()">Voir les tendances</button>
                </div>
            </div>
            <!-- 19/12/2025 16:42 d√©but MIR-->
            <div class="clubs-container">
                <h3>Ou choisissez une √©quipe directement :</h3>

                <div id="clubsGrid" class="clubs-grid">
                    <div class="loader"></div> Chargement...
                </div>
            </div>
            <!-- 19/12/2025 fin MIR-->
        </section>

        <section id="simulate" class="page" style="display:none;">
            <h2>Simulateur par Club</h2>
            <div class="search-box">
                <form id="simulationForm" onsubmit="event.preventDefault(); simulate();">
                    <label for="club">Nom du club :</label>
                    <input type="text" id="club" name="club" placeholder="Ex: Paris SG, Brest, Real Madrid...">
                    <button type="submit">Lancer la simulation</button>
                </form>
            </div>
        </section>

        <!-- 19/12/2025 17:42 d√©but MIR-->
        <section id="duel" class="page" style="display:none;">
            <h2>üîÆ Pr√©dicteur de Match</h2>
            <p>Simulez une rencontre sp√©cifique en utilisant le mod√®le Elo + Poisson.</p>

            <div class="duel-container">
                <div class="team-selector">
                    <label>Domicile üè†</label>
                    <select id="selHome"></select>
                </div>

                <div class="vs-badge">VS</div>

                <div class="team-selector">
                    <label>Ext√©rieur ‚úàÔ∏è</label>
                    <select id="selAway"></select>
                </div>
            </div>

            <div style="text-align:center; margin-top:20px;">
                <button class="big-btn" onclick="lancerDuel()">Simuler le match</button>
            </div>

            <div id="duelResult" class="duel-result" style="display:none;">
                <div class="score-board">
                    <div class="team-score">
                        <span id="resHomeName">Home</span>
                        <span id="resHomeScore" class="score-digit">0</span>
                    </div>
                    <div class="divider">-</div>
                    <div class="team-score">
                        <span id="resAwayName">Away</span>
                        <span id="resAwayScore" class="score-digit">0</span>
                    </div>
                </div>
                
                <div class="proba-bar-container">
                    <div id="barWin" class="p-bar win">Win</div>
                    <div id="barDraw" class="p-bar draw">Draw</div>
                    <div id="barLoss" class="p-bar loss">Loss</div>
                </div>
            </div>
        </section>
        
        <!-- 20/12/2025  MIR-->
        <section id="ranking" class="page" style="display:none;">
            <h2>üèÜ Classement Projet√© (Moyenne)</h2>
            <p>Simulez le classement sur une p√©riode pr√©cise.</p>
            
            <div class="controls-bar">
                <div class="control-group">
                    <label for="startDay">Situation de d√©part (Apr√®s) :</label>
                    <select id="startDay">
                        <option value="0" selected>J0 (D√©but)</option>
                        <option value="1">J1</option>
                        <option value="2">J2</option>
                        <option value="3">J3</option>
                        <option value="4">J4</option>
                        <option value="5">J5</option>
                        <option value="6">J6 (Actuel)</option>
                        <option value="7">J7</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="endDay">Simuler jusqu'√† la :</label>
                    <select id="endDay">
                        <option value="1">J1</option>
                        <option value="2">J2</option>
                        <option value="3">J3</option>
                        <option value="4">J4</option>
                        <option value="5">J5</option>
                        <option value="6">J6</option>
                        <option value="7">J7</option>
                        <option value="8" selected>J8 (Fin)</option>
                    </select>
                </div>
                
                <button class="action-btn" onclick="chargerClassement()">üîÑ Calculer</button>
            </div>

            <div class="table-container">
                <table class="ranking-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th style="text-align:left;">Club</th>
                            <th>Pts</th>
                            <th>Diff.</th>
                            <th>Buts</th>
                            <th class="secondary-stat">Buts Ext.</th>
                            <th>Vic.</th>
                            <th class="secondary-stat">Vict. Ext.</th>
                        </tr>
                    </thead>
                    <tbody id="rankingBody">
                        <tr><td colspan="8" style="text-align:center;">Cliquez sur Calculer...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="legend">
                <span class="dot green"></span> Qualif Directe (1-8)
                <span class="dot orange"></span> Barrages (9-24)
                <span class="dot red"></span> √âlimin√© (25-36)
            </div>
        </section>
        

        <section id="results" class="page" style="display:none;">
            <h2>R√©sultats de la simulation</h2>
            <button onclick="showPage('simulate')" class="back-btn">‚Üê Nouvelle recherche</button>
            
            <div id="resultsContainer">
                </div>
        </section>

        <section id="analyses" class="page" style="display:none;">
            <h2>Analyses Globales (Monte Carlo)</h2>
            
            <div class="analysis-section">
                <h3>1. Les Seuils de Qualification</h3>
                <p>Combien de points faut-il pour se qualifier ?</p>
                <div class="charts-row">
                    <div class="chart-wrapper">
                        <h4>Pour le Top 8 (Qualif Directe)</h4>
                        <canvas id="chartTop8"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <h4>Pour le Top 24 (Barrages)</h4>
                        <canvas id="chartBarrage"></canvas>
                    </div>
                </div>
            </div>

            <div class="analysis-section">
                <h3>2. Matchs D√©cisifs (Prochaine Journ√©e)</h3>
                <p>Les rencontres qui auront le plus d'impact sur le classement g√©n√©ral.</p>
                <ul id="listeImportance" class="importance-list">
                    <li>Chargement des donn√©es...</li>
                </ul>
            </div>
        </section>

        <section id="probas-zone" class="page" style="display:none;">
            <h2>üìä Probabilit√©s de Qualification</h2>
            <p>Estimation des chances de chaque club selon la journ√©e de d√©part (Simul√© 1000 fois).</p>

            <div class="controls-bar">
                <div class="control-group">
                    <label>Situation apr√®s la :</label>
                    <select id="probaStartDay">
                        <option value="0" selected>J0 (D√©but Saison)</option>
                        <option value="1">Journ√©e 1</option>
                        <option value="2">Journ√©e 2</option>
                        <option value="3">Journ√©e 3</option>
                        <option value="4">Journ√©e 4</option>
                        <option value="5">Journ√©e 5</option>
                        <option value="6">Journ√©e 6 (Actuel)</option>
                        <option value="7">Journ√©e 7</option>
                    </select>
                </div>
                <button class="action-btn" onclick="chargerProbas()">Calculer les chances</button>
            </div>

            <div class="probas-container">
                
                <div class="proba-column">
                    <h3 class="green-text">üèÜ Favoris Top 8 (Qualif Directe)</h3>
                    <div class="table-wrapper">
                        <table class="ranking-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th style="text-align:left;">Club</th>
                                    <th>% Chance</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyTop8">
                                <tr><td colspan="3">Cliquez sur Calculer...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="proba-column">
                    <h3 class="orange-text">üéüÔ∏è Favoris Top 24 (Barrages + Top8)</h3>
                    <div class="table-wrapper">
                        <table class="ranking-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th style="text-align:left;">Club</th>
                                    <th>% Chance</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyQualif">
                                <tr><td colspan="3">Cliquez sur Calculer...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </section>

        <!-- Nouvelle section : Impact des matchs -->
        <section id="match-impact" class="page" style="display:none;">
            <h2>‚ö° Impact des Matchs</h2>
            
            <div class="impact-tabs">
                <button class="tab-btn active" onclick="switchImpactTab('specific')">üîç Match Sp√©cifique</button>
                <button class="tab-btn" onclick="switchImpactTab('qualif')">üéØ Qualification</button>
                <button class="tab-btn" onclick="switchImpactTab('top8')">üèÜ Top 8</button>
            </div>

            <!-- TAB 1 : Analyse d'un match sp√©cifique -->
            <div id="impact-specific" class="impact-tab-content">
                <div class="controls-bar">
                    <input type="text" id="impactClub" placeholder="Ex: Arsenal" list="clubsList">
                    <datalist id="clubsList"></datalist>
                    <select id="impactJournee">
                        <option value="7" selected>Journ√©e 7</option>
                        <option value="8">Journ√©e 8</option>
                    </select>
                    <button class="action-btn" onclick="analyserImpactMatch()">üîç Analyser</button>
                </div>
                
                <div id="impactResults"></div>
            </div>

            <!-- TAB 2 : Matchs importants QUALIFICATION -->
            <div id="impact-qualif" class="impact-tab-content" style="display:none;">
                <div class="info-box">
                    <p><strong>üìä Classement des matchs par impact sur la QUALIFICATION</strong></p>
                    <p>Ces matchs changent le plus les probabilit√©s de finir dans le top 24 (qualifi√©).</p>
                </div>
                <button class="action-btn" onclick="chargerMatchsImportants('qualif')">üîÑ Charger les matchs J7</button>
                <div id="tableQualif"></div>
            </div>

            <!-- TAB 3 : Matchs importants TOP 8 -->
            <div id="impact-top8" class="impact-tab-content" style="display:none;">
                <div class="info-box">
                    <p><strong>üèÜ Classement des matchs par impact sur le TOP 8</strong></p>
                    <p>Ces matchs changent le plus les probabilit√©s de finir dans le top 8 (qualification directe).</p>
                </div>
                <button class="action-btn" onclick="chargerMatchsImportants('top8')">üîÑ Charger les matchs J7</button>
                <div id="tableTop8"></div>
            </div>
        </section>
    
    
        <section id="impact-zone" class="page" style="display:none;">
            <h2>üí• Analyse d'Impact & Enjeux</h2>
            <p>Utilisez les fonctions de simulation avanc√©es pour pr√©dire l'avenir.</p>

            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchImpactTab('specific')">üîÆ Sc√©nario (What-If)</button>
                <button class="tab-btn" onclick="switchImpactTab('ranking')">üî• Hype-o-m√®tre</button>
            </div>

            <div id="impact-specific" class="impact-tab-content">
                <div class="search-box">
                    <div class="control-group">
                        <label>D√©part (Historique) :</label>
                        <select id="scenarioStartDay">
                            <option value="6" selected>Apr√®s J6</option>
                            <option value="7">Apr√®s J7</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Match en :</label>
                        <select id="scenarioTargetDay">
                            <option value="7" selected>Journ√©e 7</option>
                            <option value="8">Journ√©e 8</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Club & R√©sultat :</label>
                        <input type="text" id="scenarioClub" placeholder="Ex: Monaco">
                        <select id="scenarioResult">
                            <option value="V">Victoire</option>
                            <option value="N">Nul</option>
                            <option value="D">D√©faite</option>
                        </select>
                    </div>
                    <button class="action-btn" onclick="lancerScenario()">Simuler</button>
                </div>

                <div id="scenarioResultBox" style="margin-top:20px; display:none;">
                    <h3 id="scenarioTitle" style="text-align:center;">R√©sultat</h3>
                    <div class="scenario-dashboard">
                        <div class="stat-card">
                            <div class="stat-icon">üèÜ</div><div class="stat-label">Top 8</div>
                            <div class="stat-big-number green-text" id="dispTop8">0%</div>
                            <div class="progress-bg"><div id="barTop8" class="progress-bar green" style="width:0%"></div></div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéüÔ∏è</div><div class="stat-label">Qualif</div>
                            <div class="stat-big-number orange-text" id="dispQualif">0%</div>
                            <div class="progress-bg"><div id="barQualif" class="progress-bar orange" style="width:0%"></div></div>
                        </div>
                    </div>
                    <div id="scenarioVerdict" class="verdict-box">...</div>
                </div>
            </div>

            <div id="impact-ranking" class="impact-tab-content" style="display:none;">
                <div class="controls-bar">
                    <div class="control-group">
                        <label>D√©part :</label>
                        <select id="impStartDay"><option value="6" selected>Apr√®s J6</option><option value="7">Apr√®s J7</option></select>
                    </div>
                    <div class="control-group">
                        <label>Analyser :</label>
                        <select id="impTargetDay"><option value="7" selected>Journ√©e 7</option><option value="8">Journ√©e 8</option></select>
                    </div>
                    <button class="action-btn" onclick="chargerImportance()">Calculer Hype</button>
                </div>
                <div id="importanceList" class="matches-list">
                    <div class="placeholder-text">Cliquez sur calculer...</div>
                </div>
            </div>
        </section>
        
        
    </main>

    <script src="script.js"></script>
</body>
</html>
